<html>
<html lang="en">
<head>

<meta charset="UTF-8">
<title>Figure 11</title>
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">


<link rel="STYLESHEET" type="text/css" href="data_css/style_interactive_map.css">
<link href="https://fonts.googleapis.com/css?family=Oswald:200,300,400,500,600,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i" rel="stylesheet">
<link rel="shortcut icon" href="images/samosicon.ico">

<script src="data_js/jquery-latest.js"></script>
<script src="data_js/index.js"></script> 


<script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script>

<link rel="stylesheet" type="text/css" href="data_css/leaflet.css">

<!--Estos son los js de la primera capa "The place" Fase1-->
<script type="text/javascript" src="data_js/contour_lines_1.js"></script>
<script type="text/javascript" src="data_js/river_lines_1.js"></script>
<script type="text/javascript" src="data_js/river_polygons_1.js"></script>
<script type="text/javascript" src="data_js/roads_1.js"></script>

<!--Estos son los js de la segunda capa "Prerromanesque Monastic Site" Fase2-->
<script type="text/javascript" src="data_js/chapel_2.js"></script>
<script type="text/javascript" src="data_js/hospital_2.js"></script>
<script type="text/javascript" src="data_js/contour_lines_2.js"></script>
<script type="text/javascript" src="data_js/river_lines_2.js"></script>
<script type="text/javascript" src="data_js/river_polygons_2.js"></script>
<script type="text/javascript" src="data_js/roads_2.js"></script>
<script type="text/javascript" src="data_js/hypothetical_monastic_area_2.js"></script>
<script type="text/javascript" src="data_js/pilgrimage_way_2.js"></script>

<!--Estos son los js de la tercera capa "Romanesque Monastic Site" Fase3-->
<script type="text/javascript" src="data_js/contour_lines_3.js"></script>
<script type="text/javascript" src="data_js/guest_quarters_3.js"></script>
<script type="text/javascript" src="data_js/romanesque_church_3.js"></script>
<script type="text/javascript" src="data_js/romanesque_cloister_3.js"></script>
<script type="text/javascript" src="data_js/chapel_3.js"></script>
<script type="text/javascript" src="data_js/hospital_3.js"></script>
<script type="text/javascript" src="data_js/roads_3.js"></script>
<script type="text/javascript" src="data_js/river_polygons_3.js"></script>
<script type="text/javascript" src="data_js/river_lines_3.js"></script>


</head>

<body>

<h1></h1>
<h2></h2>

	<!--Esto es el mapa de js en html-->
	<div id = 'map'>
	</div>
	
	<!--Esto son todas las propiedades del mapa de Leaflet-->
<script>
	
	/**Creando el mapa/recuadro base**/
	var map = L.map('map', {
    center: [42.732058, -7.326048],
    zoom: 17,
	zoomControl:true, /**Añade el control zoom +-**/
	attributionControl: false, /**Elimina la pestañita de Leaflet de la parte inferior izquierda**/
	});
	
	/**Añadiendo el mapa Google Satellite como mapa base**/
	var BaseMapGoogleSatellite = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
    maxZoom: 20,
	minZoom: 17,
	subdomains:['mt0','mt1','mt2','mt3']
	})/**.addTo(map);      Esta no lleva addTo(map), porque no quiero que se muestre según entras, sólo si haces click en ella**/
	
	/**Añadiendo el mapa Google Streets como mapa base**/
	var BaseMapGoogleStreets = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{
    maxZoom: 20,
	minZoom: 17,
    subdomains:['mt0','mt1','mt2','mt3'],
	});/**Esta no lleva addTo(map), porque no quiero que se muestre según entras, sólo si haces click en ella**/
	
	
	/**Añadiendo una escala al mapa**/
	L.control.scale({imperial: false, position: 'bottomright'}).addTo(map);
	
	
	/**Función de Resaltar al pasar por encima general**/
	function highlightFeature(e) {
            highlightLayer = e.target;

            if (e.target.feature.geometry.type === 'LineString') {
              highlightLayer.setStyle({
                color: '#f38c7e',
				weight: 4.0,
              });
            } else {
              highlightLayer.setStyle({
                fillColor: '#f38c7e',
                fillOpacity: 0.7,
				weight: 2,
				/**color: white - ponerlo si quiero que resalte los bordes de la figura seleccionada en blanco**/
              });
            }
        }
	
	/**Para el pop-up tipo 1 (solo nombre)**/	
	function highlight_layers(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
			/**Función PopUp integrada dentro de la resaltar**/
			if (feature.properties && feature.properties.Text) {
            layer.bindPopup('<strong>'+feature.properties.Text+
			'</strong><br><hr style="border-top: 1px dotted black"/>');
			
        }
        }
	
	/**Para el pop-up tipo 2, con más info de los edificios monásticos y view more**/	
	function highlight_layers_monastic_buildings(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
			/**Función PopUp integrada dentro de la resaltar**/
			if (feature.properties && feature.properties.Name) {
            layer.bindPopup('<strong>'+feature.properties.Name+ 
			'</strong><br><hr style="border-top: 1px dotted black"/><strong>Period</strong><br>'+feature.properties.Period+
			'<br><strong>Construction Date</strong><br>'+feature.properties.Construction+
			'<br><strong>Extant</strong><br>'+feature.properties.Extant+
			'<br><strong>Event</strong><br>'+feature.properties.Event+
			'<br><a class="hyperlink" href="' +feature.properties.Url+ '" target="_blank"><strong>View more</strong></a>');
			
        }
        }
		

	/**Para el pop-up tipo 3, propiedades de apeo 1553**/	
	function highlight_properties1553(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
			/**Función PopUp integrada dentro de la resaltar**/
			if (feature.properties && feature.properties.Object) {
            layer.bindPopup('<strong>'+feature.properties.Object+ 
			'</strong><br><hr style="border-top: 1px dotted black"/><strong>Owner</strong><br>'+feature.properties.Owner+
			'<br><strong>Tenant</strong><br>'+feature.properties.Tenant+
			'<br><strong>Tenant´s Job</strong><br>'+feature.properties.TenantJob+			
			'<br><strong>Subtenant</strong><br>'+feature.properties.Subtenant+
			'<br><strong>Subtenant´s Job</strong><br>'+feature.properties.SubtenantJob+
			'<br><strong>Subsequent tenant</strong><br>'+feature.properties.SubsequentTenant+
			'<br><strong>Location</strong><br>'+feature.properties.Location+
			'<br><strong>Tenancy Year</strong><br>'+feature.properties.TenancyYear+
			'<br><strong>Residents</strong><br>'+feature.properties.Residents+
			'<br><strong>Holding Type (es)</strong><br>'+feature.properties.HoldingType+
			'<br><strong>Rent (es)</strong><br>'+feature.properties.Rent+
			'<br><strong>Notes from 1570-80</strong><br>'+feature.properties.LaterNotes+
			'<br><strong>Document Date</strong><br>'+feature.properties.DocumentDate+
			'<br><strong>Document Type</strong><br>'+feature.properties.DocumentType+
			'<br><strong>Document Reference</strong><br>'+feature.properties.Document+
			'');
			
        }
        }
	

	/**Para el pop-up tipo 4, propiedades de la visita de 1587**/	
	function highlight_properties1587(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
			/**Función PopUp integrada dentro de la resaltar**/
			if (feature.properties && feature.properties.Object) {
            layer.bindPopup('<strong>'+feature.properties.Object+ 
			'</strong><br><hr style="border-top: 1px dotted black"/><strong>Owner</strong><br>'+feature.properties.Owner+
			'<br><strong>Tenant</strong><br>'+feature.properties.Tenant+
			'<br><strong>Tenant´s Job</strong><br>'+feature.properties.TenantJob+
			'<br><strong>Subtenant</strong><br>'+feature.properties.Subtenant+
			'<br><strong>Previous tenant</strong><br>'+feature.properties.PreviousTenant+
			'<br><strong>Location</strong><br>'+feature.properties.Location+
			'<br><strong>Tenancy Year</strong><br>'+feature.properties.TenancyYear+
			'<br><strong>Holding Type (es)</strong><br>'+feature.properties.HoldingType+
			'<br><strong>Document 1 Date</strong><br>'+feature.properties.DocumentDate1+
			'<br><strong>Document 1 Type</strong><br>'+feature.properties.DocumentType1+
			'<br><strong>Document 1 Reference</strong><br>'+feature.properties.Document1+
			'<br><strong>Document 2 Date</strong><br>'+feature.properties.DocumentDate2+
			'<br><strong>Document 2 Type</strong><br>'+feature.properties.DocumentType2+
			'<br><strong>Document 2 Reference</strong><br>'+feature.properties.Document2+
			'<br><strong>Document 3 Date</strong><br>'+feature.properties.DocumentDate3+
			'<br><strong>Document 3 Type</strong><br>'+feature.properties.DocumentType3+
			'<br><strong>Document 3 Reference</strong><br>'+feature.properties.Document3+
			'');
			
        }
        }
	
	/**Para el pop-up tipo 5, propiedades en la fase6, primera mitad del siglo 17**/	
	function highlight_properties17century(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
			/**Función PopUp integrada dentro de la resaltar**/
			if (feature.properties && feature.properties.Object) {
            layer.bindPopup('<strong>'+feature.properties.Object+ 
			'</strong><br><hr style="border-top: 1px dotted black"/><strong>Owner</strong><br>'+feature.properties.Owner+
			'<br><strong>Tenant</strong><br>'+feature.properties.Tenant+
			'<br><strong>Tenant´s Job</strong><br>'+feature.properties.TenantJob+
			'<br><strong>Subtenant</strong><br>'+feature.properties.Subtenant+
			'<br><strong>Subtenant´s Job</strong><br>'+feature.properties.SubtenantJob+
			'<br><strong>Previous tenant</strong><br>'+feature.properties.PreviousTenant+
			'<br><strong>Location</strong><br>'+feature.properties.Location+
			'<br><strong>Tenancy Year</strong><br>'+feature.properties.TenancyYear+
			'<br><strong>Holding Type (es)</strong><br>'+feature.properties.HoldingType+
			'<br><strong>Document 1 Date</strong><br>'+feature.properties.DocumentDate1+
			'<br><strong>Document 1 Type</strong><br>'+feature.properties.DocumentType1+
			'<br><strong>Document 1 Reference</strong><br>'+feature.properties.Document1+
			'<br><strong>Document 2 Date</strong><br>'+feature.properties.DocumentDate2+
			'<br><strong>Document 2 Type</strong><br>'+feature.properties.DocumentType2+
			'<br><strong>Document 2 Reference</strong><br>'+feature.properties.Document2+
			'<br><strong>Document 3 Date</strong><br>'+feature.properties.DocumentDate3+
			'<br><strong>Document 3 Type</strong><br>'+feature.properties.DocumentType3+
			'<br><strong>Document 3 Reference</strong><br>'+feature.properties.Document3+
			'');
			
        }
        }
		
		
		
	/**Para el pop-up tipo 6, propiedades en la fase7, segunda mitad del siglo 17**/	
	function highlight_propertiesDemarcation(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (i in e.target._eventParents) {
                        e.target._eventParents[i].resetStyle(e.target);
                    }
                },
                mouseover: highlightFeature,
            });
			/**Función PopUp integrada dentro de la resaltar**/
			if (feature.properties && feature.properties.Object) {
            layer.bindPopup('<strong>'+feature.properties.Object+ 
			'</strong><br><hr style="border-top: 1px dotted black"/><strong>Owner</strong><br>'+feature.properties.Owner+
			'<br><strong>Tenant</strong><br>'+feature.properties.Tenant+
			'<br><strong>Tenant´s Job</strong><br>'+feature.properties.TenantJob+
			'<br><strong>Subtenant</strong><br>'+feature.properties.Subtenant+
			'<br><strong>Subtenant´s Job</strong><br>'+feature.properties.SubtenantJob+
			'<br><strong>Previous tenant</strong><br>'+feature.properties.PreviousTenant+
			'<br><strong>Location</strong><br>'+feature.properties.Location+
			'<br><strong>Tenancy Year</strong><br>'+feature.properties.TenancyYear+
			'<br><strong>Upper bordering property</strong><br>'+feature.properties.UpperBorder+
			'<br><strong>Lower bordering property</strong><br>'+feature.properties.LowerBorder+
			'<br><strong>Side bordering property 1</strong><br>'+feature.properties.SideBorder1+
			'<br><strong>Side bordering property 2</strong><br>'+feature.properties.SideBorder2+
			'<br><strong>Holding Type (es)</strong><br>'+feature.properties.HoldingType+			
			'<br><strong>Number of floors </strong><br>'+feature.properties.Floors+
			'<br><strong>Measurement (es) </strong><br>'+feature.properties.Measurement+
			'<br><strong>Trees</strong><br>'+feature.properties.Trees+
			'<br><strong>Enclosing walls</strong><br>'+feature.properties.EnclosingWalls+
			'<br><strong>Document Date</strong><br>'+feature.properties.DocumentDate+
			'<br><strong>Document Type</strong><br>'+feature.properties.DocumentType+
			'<br><strong>Document Reference</strong><br>'+feature.properties.Document+
			'');
			
        }
        }
		

	/**Definiendo los estilos**/
	var Style_roads = {opacity: 1,
					color: 'rgba(35,35,35,0.0)',
					dashArray: '',
					lineCap: 'butt',
					lineJoin: 'miter',
					weight: 1.0, 
					fill: true,
					fillOpacity: 0.7,
					fillColor: 'rgba(145,82,45,0.7)',
	};
	
	var Style_contour_lines = {color: "#b0b0ae",
							opacity: 1,
							weight: 1.0,
							fillOpacity: 0,
							dashArray: '',
							lineCap: 'square',
							lineJoin: 'bevel',
	};
	
	var Style_river_lines = {opacity: 1,
							color: 'rgba(88,200,214,0.7)',
							dashArray: '',
							lineCap: 'square',
							lineJoin: 'bevel',
							weight: 2.0,
							fillOpacity: 0.7,
	};
	
	var Style_river_polygons = {opacity: 1,
							color: 'rgba(35,35,35,0.0)',
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 1.0, 
							fill: true,
							fillOpacity: 0.7,
							fillColor: 'rgba(166,206,227,0.7)',
	};
	
	var Style_buildings = {opacity: 1,
							color: 'rgba(191,72,56,1.0)',    /**Este color, que es el del borde, es más oscuro que el de relleno, #BF4838**/
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2.0, 
							fill: true,
							fillOpacity: 0.7,
							fillColor: "#EF5B47",
	};
	
	var Style_village_houses = {opacity: 1,
							color: 'rgba(191,72,56,1.0)',
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2.0, 
							fill: true,
							fillOpacity: 0.7,
							fillColor: "#EF5B47",
	};
	
	var Style_village_auxiliary = {opacity: 1,
							color: "#bf8c38",
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2.0, 
							fill: true,
							fillOpacity: 0.7,
							fillColor: 'rgba(239,175,71,0.7)',
	};
	
	var Style_equipments = {opacity: 1,
							color: "#772d23",
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2.0, 
							fill: true,
							fillOpacity: 0.7,
							fillColor: "#772d23",
	};
	
	
	var Style_properties_polygons = {opacity: 1,
							color: "#a0b945",
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2.0, 
							fillOpacity: 0.2,
							fillColor: "#a0b945",       /**#8aa137, Otras opciones de colores**/
	};
	
	var Style_properties_points = {radius: 7,
							fillColor: "#a0b945",
							color: "#a0b945",
							weight: 3,
							opacity: 1,
							fillOpacity: 0.2,
	};
	
	var Style_wall_remains = {opacity: 1,
							color: "#a73f31",
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2, 
							fillOpacity: 0.2,
							fillColor: "#a73f31",
	};
	
	var Style_wall_hypothesis = {opacity: 1,
							color: "#7c9035",          /**#7C894B (un verde oscuro), #bf8c38 (es el ocre del borde de las auxiliares), Otras opciones de colores**/
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2, 
							fillOpacity: 0.2,
							fillColor: "#7c9035",
	};
	
	var Style_under_construction = {opacity: 1,
							color: 'rgba(191,72,56,1.0)',
							dashArray: '2',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2.0, 
							fillOpacity: 0.7,
							fillColor: "#EF5B47",
	};
	
	/**Archivos de la Fase1 The Place. Todas las subcapas y la propia cada de esta primera fase llevan al final addTo(map) porque quiero que sea esta la capa que se muestra en el navegador cuando entra en primera lugar, las otras capas y subcapas no llevan addTo(map) al final porque no quiero que se muestren según entras, sólo cuando clicas en ellas**/
	/**Llamada al geoson contour_lines_0 que tiene que estar añadido en el head del html OJO!!**/
	var geojson_contour_lines_1 = L.geoJson(contour_lines_1, {
							style: function(featureCollection){
							return (Style_contour_lines);	/**Llamada al estilo correspondiente de los definidos arriba. Si quisiera que esta capa tubiera el estilo embebido aquí, sin hacer llamada a ningún sitio, donde pone (Style_contour_lines) tendría que poner {color: "#b0b0ae",
							opacity: 1,
							weight: 1.0,
							fillOpacity: 0,
							dashArray: '',
							lineCap: 'square',
							lineJoin: 'bevel'}**/	
	  }
	}).addTo(map);
	
	
	/**Dentro del geoJson, la línea onEachFeature, hace la llamada a la función del PopUp**/
	var geojson_river_lines_1 = L.geoJson(river_lines_1, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_lines);		
	  }
	}).addTo(map);
	
	
	
	var geojson_river_polygons_1 = L.geoJson(river_polygons_1, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_polygons);	
	  }
	}).addTo(map);
	
	
	
	var geojson_roads_1 = L.geoJson(roads_1, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_roads);	
	  }
	});   /**sin visualizar en el plano base, por eso saqué el .addTo(map);**/
	
	
	
	var marker_thePlace = L.marker([42.732123, -7.326089]); /**Le saqué el addTo(map) para sólo lo muestre cuando hago click en la capa**/
	marker_thePlace.bindPopup('<strong>The Place</strong><br><hr style="border-top: 1px dotted black"/><a class="hyperlink" href="under_construction.html" target="_blank"><strong>► More info</strong></a>');
	
	
	/**Fase1 The Place**/
	var thePlace = L.featureGroup([geojson_contour_lines_1, 
	geojson_contour_lines_1, 
	geojson_river_polygons_1, 
	geojson_roads_1, 
	marker_thePlace]);
	
	
	/**Archivos de la Fase2 Prerromanesque Spaces**/
	var geojson_chapel_2 = L.geoJson(chapel_2, {
							onEachFeature: highlight_layers_monastic_buildings, /**Ojo para que lea del segundo tipo de pop-up**/
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_hospital_2 = L.geoJson(hospital_2, {
							onEachFeature: highlight_layers_monastic_buildings, 
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_contour_lines_2 = L.geoJson(contour_lines_2, {
							style: function(featureCollection){
							return (Style_contour_lines);		
	  }
	});

	
	var geojson_river_lines_2 = L.geoJson(river_lines_2, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_lines);		
	  }
	});
	
	var geojson_river_polygons_2 = L.geoJson(river_polygons_2, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_polygons);	
	  }
	});
	
	var geojson_roads_2 = L.geoJson(roads_2, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_roads);	
	  }
	});
	
	var geojson_hypothetical_monastic_area_2 = L.geoJson(hypothetical_monastic_area_2, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return {opacity: 1,
							color: 'rgba(191,72,56,1.0)',
							dashArray: '5',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 4.0, 
							fillOpacity: 0,};	
	  }
	});
	
	var geojson_pilgrimage_way_2 = L.geoJson(pilgrimage_way_2, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return {opacity: 1,
							color: 'rgba(35,35,35,0.0)',
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 1.0, 
							fill: true,
							fillOpacity: 1,
							fillColor: 'rgba(240,236,96,0.7)'};
		}
	});
	
	
	/**Fase2 Prerromanesque Monastic Site**/
	var prerromanesqueSpaces = L.featureGroup([geojson_chapel_2, 
	geojson_hospital_2,
	geojson_contour_lines_2, 
	geojson_river_lines_2, 
	geojson_river_polygons_2, 
	geojson_roads_2, 
	geojson_hypothetical_monastic_area_2, 
	geojson_pilgrimage_way_2]);
	
	
	/**Archivos de la Fase3 Romanesque Spaces**/
	var geojson_contour_lines_3 = L.geoJson(contour_lines_3, {
							style: function(featureCollection){
							return (Style_contour_lines);	
		}							
	});
	
	var geojson_guest_quarters_3 = L.geoJson(guest_quarters_3, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_church_3 = L.geoJson(romanesque_church_3, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_cloister_3 = L.geoJson(romanesque_cloister_3, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_chapel_3 = L.geoJson(chapel_3, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_hospital_3 = L.geoJson(hospital_3, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return {opacity: 1,
							color: 'rgba(191,72,56,1.0)',
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2.0, 
							fillOpacity: 0,};	
		}							
	});
	
	var geojson_roads_3 = L.geoJson(roads_3, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_roads);	
		}							
	});
	
	var geojson_river_polygons_3 = L.geoJson(river_polygons_3, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_polygons);	
		}							
	});
	
	var geojson_river_lines_3 = L.geoJson(river_lines_3, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_lines);	
		}							
	});
	
	/**Fase3 Romanesque Monastic Site**/
	var romanesqueSpaces = L.featureGroup([geojson_contour_lines_3, 
	geojson_guest_quarters_3, 
	geojson_romanesque_church_3, 
	geojson_romanesque_cloister_3,
	geojson_chapel_3,
	geojson_hospital_3,
	geojson_roads_3,
	geojson_river_polygons_3,
	geojson_river_lines_3
	]);
	
	
	
	/**Archivos de la Fase4 Monastic Site in the first half of the 16th century**/
	var geojson_contour_lines_4 = L.geoJson(contour_lines_4, {
							style: function(featureCollection){
							return (Style_contour_lines);	
		}							
	});
	
	var geojson_guest_quarters_4 = L.geoJson(guest_quarters_4, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_church_4 = L.geoJson(romanesque_church_4, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_cloister_4 = L.geoJson(romanesque_cloister_4, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return {opacity: 1,
							color: 'rgba(191,72,56,1.0)',
							dashArray: '',
							lineCap: 'butt',
							lineJoin: 'miter',
							weight: 2.0, 
							fillOpacity: 0,};	
		}							
	});
	
	var geojson_chapel_4 = L.geoJson(chapel_4, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_village_auxiliary_buildings_4 = L.geoJson(village_auxiliary_buildings_4, {
							style: function(featureCollection){
							return (Style_village_auxiliary);	
		}							
	});
	
	var geojson_village_houses_4 = L.geoJson(village_houses_4, {
							style: function(featureCollection){
							return (Style_village_houses);	
		}							
	});	
	
	var geojson_hospital_4 = L.geoJson(hospital_4, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_equipments);	
		}							
	});
		
	var geojson_properties_polygons_4 = L.geoJson(properties_polygons_4, {
							onEachFeature: highlight_properties1553,
							style: function(featureCollection){
							return (Style_properties_polygons);	
		}							
	});
	
	/**Este es distinto porque son puntos**/
	var geojson_properties_points_4 = L.geoJson(properties_points_4, {
							onEachFeature: highlight_properties1553,
							pointToLayer: function (feature, latlng) {      
							return L.circleMarker(latlng, Style_properties_points);	
		}							
	});
	
	var geojson_roads_4 = L.geoJson(roads_4, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_roads);	
		}							
	});
	
	var geojson_river_polygons_4 = L.geoJson(river_polygons_4, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_polygons);	
		}							
	});
	
	var geojson_river_lines_4 = L.geoJson(river_lines_4, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_lines);	
		}							
	});
	
	
	/**Fase4**/
	var firstHalf16thCentury = L.featureGroup([geojson_contour_lines_4, 
	geojson_guest_quarters_4, 
	geojson_romanesque_church_4, 
	geojson_romanesque_cloister_4,
	geojson_chapel_4,
	geojson_village_auxiliary_buildings_4,
	geojson_village_houses_4,
	geojson_hospital_4,
	geojson_properties_polygons_4,
	geojson_properties_points_4,
	geojson_roads_4,
	geojson_river_polygons_4,
	geojson_river_lines_4
	]);
	
	
	/**Archivos de la Fase5 Monastic Site in the second half of the 16th century**/
	var geojson_contour_lines_5 = L.geoJson(contour_lines_5, {
							style: function(featureCollection){
							return (Style_contour_lines);	
		}							
	});
	
	var geojson_gothic_cloister_5 = L.geoJson(gothic_cloister_5, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_under_construction);	
		}							
	});
	
	var geojson_guest_quarters_5 = L.geoJson(guest_quarters_5, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_church_5 = L.geoJson(romanesque_church_5, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_cloister_5 = L.geoJson(romanesque_cloister_5, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_chapel_5 = L.geoJson(chapel_5, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_village_auxiliary_buildings_5 = L.geoJson(village_auxiliary_buildings_5, {
							style: function(featureCollection){
							return (Style_village_auxiliary);	
		}							
	});
	
	var geojson_village_houses_5 = L.geoJson(village_houses_5, {
							style: function(featureCollection){
							return (Style_village_houses);	
		}							
	});
	
	
	var geojson_village_equipments_5 = L.geoJson(village_equipments_5, {
							onEachFeature: highlight_properties1587,
							style: function(featureCollection){
							return (Style_equipments);	
		}							
	});
	
	var geojson_properties_polygons_5 = L.geoJson(properties_polygons_5, {
							onEachFeature: highlight_properties1587,
							style: function(featureCollection){
							return (Style_properties_polygons);	
		}							
	});
	
	var geojson_wall_remains_5 = L.geoJson(wall_remains_5, {
							style: function(featureCollection){
							return (Style_wall_remains);	
		}							
	});
	
	var geojson_wall_hypothesis_5 = L.geoJson(wall_hypothesis_5, {
							style: function(featureCollection){
							return (Style_wall_hypothesis);	
		}							
	});
	
	var geojson_roads_5 = L.geoJson(roads_5, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_roads);	
		}							
	});
	
	var geojson_river_polygons_5 = L.geoJson(river_polygons_5, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_polygons);	
		}							
	});
	
	var geojson_river_lines_5 = L.geoJson(river_lines_5, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_lines);	
		}							
	});
	
	/**Fase5**/
	var secondHalf16thCentury = L.featureGroup([geojson_contour_lines_5, 
	geojson_gothic_cloister_5,
	geojson_guest_quarters_5, 
	geojson_romanesque_church_5, 
	geojson_romanesque_cloister_5,
	geojson_chapel_5,
	geojson_village_auxiliary_buildings_5,
	geojson_village_houses_5,
	geojson_village_equipments_5,
	geojson_wall_remains_5,
	geojson_wall_hypothesis_5,
	geojson_properties_polygons_5,
	geojson_roads_5,
	geojson_river_polygons_5,
	geojson_river_lines_5
	]);
	
	
	/**Archivos de la Fase6 Monastic Site in the first half of the 17th century**/
	var geojson_contour_lines_6 = L.geoJson(contour_lines_6, {
							style: function(featureCollection){
							return (Style_contour_lines);	
		}							
	});
	
	var geojson_gothic_cloister_6 = L.geoJson(gothic_cloister_6, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_guest_quarters_6 = L.geoJson(guest_quarters_6, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_church_6 = L.geoJson(romanesque_church_6, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_cloister_6 = L.geoJson(romanesque_cloister_6, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_chapel_6 = L.geoJson(chapel_6, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_properties_polygons_6 = L.geoJson(properties_polygons_6, {
							onEachFeature: highlight_properties17century,
							style: function(featureCollection){
							return (Style_properties_polygons);	
		}							
	});
	
	var geojson_village_auxiliary_buildings_6 = L.geoJson(village_auxiliary_buildings_6, {
							onEachFeature: highlight_properties17century,
							style: function(featureCollection){
							return (Style_village_auxiliary);	
		}							
	});
	
	var geojson_village_houses_6 = L.geoJson(village_houses_6, {
							onEachFeature: highlight_properties17century,
							style: function(featureCollection){
							return (Style_village_houses);	
		}							
	});
	
	
	var geojson_village_equipments_6 = L.geoJson(village_equipments_6, {
							onEachFeature: highlight_properties17century,
							style: function(featureCollection){
							return (Style_equipments);	
		}							
	});
	

	
	var geojson_wall_remains_6 = L.geoJson(wall_remains_6, {
							style: function(featureCollection){
							return (Style_wall_remains);	
		}							
	});
	
	var geojson_wall_hypothesis_6 = L.geoJson(wall_hypothesis_6, {
							style: function(featureCollection){
							return (Style_wall_hypothesis);	
		}							
	});
	
	var geojson_roads_6 = L.geoJson(roads_6, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_roads);	
		}							
	});
	
	var geojson_river_polygons_6 = L.geoJson(river_polygons_6, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_polygons);	
		}							
	});
	
	var geojson_river_lines_6 = L.geoJson(river_lines_6, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_lines);	
		}							
	});
	
	var geojson_dam_6 = L.geoJson(dam_6, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_village_auxiliary);	
		}							
	});
	
	/**Fase6**/
	var firstHalf17thCentury = L.featureGroup([geojson_contour_lines_6, 
	geojson_gothic_cloister_6,
	geojson_guest_quarters_6, 
	geojson_romanesque_church_6, 
	geojson_romanesque_cloister_6,
	geojson_chapel_6,
	geojson_properties_polygons_6,	
	geojson_village_auxiliary_buildings_6,
	geojson_village_houses_6,
	geojson_village_equipments_6,
	geojson_wall_remains_6,
	geojson_wall_hypothesis_6,
	geojson_roads_6,
	geojson_river_polygons_6,
	geojson_river_lines_6,
	geojson_dam_6
	]);
	
	/**Archivos de la Fase7 Monastic Site in the second half of the 17th century**/
	
	var geojson_contour_lines_7 = L.geoJson(contour_lines_7, {
							style: function(featureCollection){
							return (Style_contour_lines);	
		}							
	});
	
	var geojson_gothic_cloister_7 = L.geoJson(gothic_cloister_7, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_romanesque_church_7 = L.geoJson(romanesque_church_7, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_chapel_7 = L.geoJson(chapel_7, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_buildings);	
		}							
	});
	
	var geojson_properties_polygons_7 = L.geoJson(properties_polygons_7, {
							onEachFeature: highlight_propertiesDemarcation,
							style: function(featureCollection){
							return (Style_properties_polygons);	
		}							
	});
	
	var geojson_village_auxiliary_buildings_7 = L.geoJson(village_auxiliary_buildings_7, {
							onEachFeature: highlight_propertiesDemarcation,
							style: function(featureCollection){
							return (Style_village_auxiliary);	
		}							
	});
	
	var geojson_village_houses_7 = L.geoJson(village_houses_7, {
							onEachFeature: highlight_propertiesDemarcation,
							style: function(featureCollection){
							return (Style_village_houses);	
		}							
	});
	
	var geojson_village_equipments_7 = L.geoJson(village_equipments_7, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_equipments);	
		}							
	});
	
	var geojson_cross_7 = L.geoJson(cross_7, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_equipments);	
		}							
	});
	
	var geojson_monastic_wall_remains_7 = L.geoJson(monastic_wall_remains_7, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_wall_remains);	
		}							
	});
	
	var geojson_monastic_wall_hypothesis_7 = L.geoJson(monastic_wall_hypothesis_7, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_wall_hypothesis);	
		}							
	});
	
	var geojson_wall_remains_7 = L.geoJson(wall_remains_7, {
							style: function(featureCollection){
							return (Style_wall_remains);	
		}							
	});
	
	var geojson_wall_hypothesis_7 = L.geoJson(wall_hypothesis_7, {
							style: function(featureCollection){
							return (Style_wall_hypothesis);	
		}							
	});
	
	var geojson_roads_7 = L.geoJson(roads_7, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_roads);	
		}							
	});
	
	var geojson_river_polygons_7 = L.geoJson(river_polygons_7, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_polygons);	
		}							
	});
	
	var geojson_river_lines_7 = L.geoJson(river_lines_7, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_river_lines);	
		}							
	});
	
	var geojson_dam_7 = L.geoJson(dam_7, {
							onEachFeature: highlight_layers,
							style: function(featureCollection){
							return (Style_village_auxiliary);	
		}							
	});
	
	var geojson_church_7 = L.geoJson(church_7, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_under_construction);	
		}							
	});
	
	var geojson_big_cloister_7 = L.geoJson(big_cloister_7, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_under_construction);	
		}							
	});
	
	var geojson_kitchen_7 = L.geoJson(kitchen_7, {
							onEachFeature: highlight_layers_monastic_buildings,
							style: function(featureCollection){
							return (Style_under_construction);	
		}							
	});
	

	
	
	/**Fase7**/
	var secondHalf17thCentury = L.featureGroup([geojson_contour_lines_7, 
	geojson_gothic_cloister_7,
	geojson_romanesque_church_7, 
	geojson_chapel_7,
	geojson_properties_polygons_7,	
	geojson_village_auxiliary_buildings_7,
	geojson_village_houses_7,
	geojson_village_equipments_7,
	geojson_cross_7,
	geojson_monastic_wall_remains_7,
	geojson_monastic_wall_hypothesis_7,
	geojson_wall_remains_7,
	geojson_wall_hypothesis_7,
	geojson_roads_7,
	geojson_river_polygons_7,
	geojson_river_lines_7,
	geojson_dam_7,
	geojson_church_7,
	geojson_big_cloister_7,
	geojson_kitchen_7,
	]);
	
	
	
	
	
	
	
	
	
	/**Creando la asociación de fases**/
	var evolutionStages = {
	"<strong>The Place</strong>": thePlace,
	"<strong>Pre-12<sup>th</sup> century</strong>": prerromanesqueSpaces,
	"<strong>From 12<sup>th</sup> to 15<sup>th</sup> century</strong>": romanesqueSpaces,
	"<strong>First half of the 16<sup>th</sup> century</strong>": firstHalf16thCentury,
	"<strong>Second half of the 16<sup>th</sup> century</strong>": secondHalf16thCentury,
	"<strong>First half of the 17<sup>th</sup> century</strong>": firstHalf17thCentury,
	"<strong>Second half of the 17<sup>th</sup> century</strong>": secondHalf17thCentury,
	};
	
	
	
	/**Creando la asociación de capas base**/
	var baseMaps = {
	"Base Map Google Streets": BaseMapGoogleStreets,
	"Base Map Google Satellite": BaseMapGoogleSatellite,	
	};
	

	
	/**Crea la leyenda de las capas, controlador**/
	/**Si quiero que no esté expandido el controlador sólo tengo que borrar ",{collapsed:false}"**/
	L.control.layers(evolutionStages, baseMaps,{collapsed:true,}).addTo(map);
	
	
	
	
	
	</script>
	
	

	</div>


<div id="footer"><strong>Figure 11.</strong> Manually coded interactive web-map showing the basics of Digital Samos spatial framework: visual, multilayered, multi-scalar, time-based and structurally open-ended. Web-map: the author. </div>
</div>

</body>

</html>